<style>
    body { font-family: Arial, sans-serif; }
    #editor { height:300px; }
    #toolbar { margin-bottom: 8px; }
  </style>

<form action="/create" method="POST">
  <h2>Create Post</h2>

  <div class="input-field">
    <input type="text" name="title" placeholder="Новое название" value="{{title}}" required>
    <input type="hidden" name="description" class="hidden-input">
  </div>
  <div id="editor" name="description"></div>

  <button type="submit" onclick="onSubmit()" class="btn">Create</button>
<script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
  <script>
      let hiddenInput = document.querySelector('.hidden-input')
      const quill = new Quill('#editor', {
    theme: 'snow',
    modules: {
      toolbar: {
        container: [
          [{ 'header': [1, 2, false] }],        // заголовки H1, H2, обычный текст
          ['bold', 'italic', 'underline'],     // базовое форматирование
          [{ 'list': 'ordered' }, { 'list': 'bullet' }], // списки
          ['link', 'image']  
        ],
        handlers: {
          image: function () {
            const url = prompt('Вставьте ссылку на изображение:');
            if (url && isValidImageUrl(url)) {
              const range = this.quill.getSelection();
              this.quill.insertEmbed(range.index, 'image', url);
            }
          }
        }
      }
    }
  });

  // Простая проверка на допустимую ссылку
  function isValidImageUrl(url) {
    return /^https?:\/\/.+\.(jpg|jpeg|png|gif|webp|svg)$/i.test(url);
  }

  function onSubmit() {
    hiddenInput.value = JSON.stringify(quill.getContents())
    hiddenInput.value = quill.root.innerHTML
    if (hiddenInput === '') {
      return
      res.send('ddd')
    }
  }
  </script>
  </form>