<h1>üìä <%= month %> <%= year %></h1>

<canvas id="weightChart" width="600" height="300"></canvas>

<script>
    let filteredWeights = <%- JSON.stringify(filteredWeights) %>;
    let data = []

    filteredWeights.sort(function(a, b) {
        return new Date(a.date) - new Date(b.date);
    })

    for (let i = 0; i < filteredWeights.length; i++) {
        data.push(filteredWeights[i].weight)
    }
    console.log(filteredWeights)


    console.log(data)
    const ctx = document.getElementById('weightChart').getContext('2d');
    const chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: ["01", "02", "03", "04", "05", "06", "07"],
            datasets: [{
                label: '–í–µ—Å (–∫–≥)',
                data: data,
                borderColor: 'blue',
                backgroundColor: 'rgba(0, 0, 255, 0.1)',
                tension: 0.3
            }]
        },
        options: {
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        }
    });
</script>

<p>üìâ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å: <strong class="min-weight">74.7 –∫–≥</strong></p>
<p>üìà –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤–µ—Å: <strong class="max-weight">75.5 –∫–≥</strong></p>
<p>‚öñ –°—Ä–µ–¥–Ω–∏–π –≤–µ—Å: <strong class="middle-weight">75.1 –∫–≥</strong></p>

<p><a href="/">‚¨Ö –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –º–µ—Å—è—Ü–µ–≤</a></p>
<script>
    let minWeight = document.querySelector('.min-weight')
    let maxWeight = document.querySelector('.max-weight')
    let middleWeight = document.querySelector('.middle-weight')

    let maxValue = Math.max.apply(null, data)
    let minimum = Math.min(...data)
    let middle = 0
    for (let i = 0; i < data.length; i++) {
        middle = middle + data[i]
    }
    middle = middle / data.length
    middle = Math.floor(middle)

    minWeight.textContent = minimum
    maxWeight.textContent = maxValue
    middleWeight.textContent = middle
</script>

